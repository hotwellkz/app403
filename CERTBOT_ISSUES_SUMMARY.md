# üîß –ü—Ä–æ–±–ª–µ–º—ã —Å Certbot –∏ —Ä–µ—à–µ–Ω–∏—è

## üö® –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. DNS –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–≤–∞ IP –∞–¥—Ä–µ—Å–∞
- **–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:** DNS –¥–ª—è `api.2wix.ru` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `35.194.39.8` –∏ `159.255.37.158`
- **–ü—Ä–æ–±–ª–µ–º–∞:** Certbot –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ —Å—Ç–∞—Ä—ã–π IP `35.194.39.8`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- **–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å DNS A-–∑–∞–ø–∏—Å—å, —á—Ç–æ–±—ã —É–∫–∞–∑—ã–≤–∞–ª–∞ **–¢–û–õ–¨–ö–û** –Ω–∞ `159.255.37.158`

### 2. HTTP —Ä–µ–¥–∏—Ä–µ–∫—Ç –¥–ª—è ACME challenge
- **–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:** –ó–∞–ø—Ä–æ—Å—ã –∫ `/.well-known/acme-challenge/` —Ä–µ–¥–∏—Ä–µ–∫—Ç—è—Ç—Å—è –Ω–∞ HTTPS
- **–ü—Ä–æ–±–ª–µ–º–∞:** Let's Encrypt —Ç—Ä–µ–±—É–µ—Ç HTTP –±–µ–∑ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- **–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ nginx - location –¥–ª—è ACME challenge –¥–æ–±–∞–≤–ª–µ–Ω –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º

---

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. ‚úÖ **–ö–æ–Ω—Ñ–∏–≥ nginx –æ–±–Ω–æ–≤–ª–µ–Ω** - ACME challenge location –¥–æ–±–∞–≤–ª–µ–Ω
2. ‚úÖ **–ü–æ—Ä—è–¥–æ–∫ location –±–ª–æ–∫–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π** - ACME –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º
3. ‚úÖ **–§–∞–π—Ä–≤–æ–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - –ø–æ—Ä—Ç 80 –æ—Ç–∫—Ä—ã—Ç
4. ‚úÖ **Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç** - —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç–∞—Ö 80 –∏ 443

---

## ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### –û–±–Ω–æ–≤–∏—Ç—å DNS

1. –í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è DNS (–≥–¥–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–æ–º–µ–Ω 2wix.ru)
2. –ù–∞–π–¥–∏—Ç–µ A-–∑–∞–ø–∏—Å—å –¥–ª—è `api.2wix.ru`
3. –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π IP `35.194.39.8`
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **–¢–û–õ–¨–ö–û** `159.255.37.158`
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
6. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 –º–∏–Ω—É—Ç –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
ssh shortsai-vps
dig +short api.2wix.ru
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –¢–û–õ–¨–ö–û: 159.255.37.158
```

### –ü–æ–≤—Ç–æ—Ä–∏—Ç—å certbot

```bash
ssh shortsai-vps
sudo certbot --nginx -d api.2wix.ru
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è DNS

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS:
```bash
dig +short api.2wix.ru
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å: 159.255.37.158
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ACME path:
```bash
echo 'test' | sudo tee /var/www/html/.well-known/acme-challenge/test
curl http://api.2wix.ru/.well-known/acme-challenge/test
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: test (–Ω–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç!)
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–∑–≤–Ω–µ:
```bash
# –° –¥—Ä—É–≥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
curl -I http://api.2wix.ru/.well-known/acme-challenge/test
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 200 –∏–ª–∏ 404 (–Ω–µ timeout!)
```

---

## üìã –†–µ–∑—é–º–µ

‚úÖ **Nginx –∫–æ–Ω—Ñ–∏–≥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω**  
‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ DNS** - —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π IP `35.194.39.8`  
‚úÖ **–§–∞–π—Ä–≤–æ–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω**  
‚úÖ **–ü–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã**  

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –û–±–Ω–æ–≤–∏—Ç—å DNS –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å certbot.

---

**–î–∞—Ç–∞:** 2026-01-08
