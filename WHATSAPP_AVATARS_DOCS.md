# üé≠ –°–∏—Å—Ç–µ–º–∞ –∞–≤–∞—Ç–∞—Ä–æ–∫ WhatsApp –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

## üéØ **–û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –∞–≤–∞—Ç–∞—Ä–æ–∫ WhatsApp –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –∑–∞–≥—Ä—É–∑–∫–æ–π –≤ —Ñ–æ–Ω–µ –∏ –∫—Ä–∞—Å–∏–≤—ã–º–∏ –∑–∞–≥–ª—É—à–∫–∞–º–∏.

## ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**

### üîß **–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** –∞–≤–∞—Ç–∞—Ä–æ–∫ –∏–∑ WhatsApp —á–µ—Ä–µ–∑ `client.getProfilePicUrl()`
- ‚úÖ **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å TTL 24 —á–∞—Å–∞
- ‚úÖ **–ë–∞—Ç—á–µ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** –∞–≤–∞—Ç–∞—Ä–æ–∫ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ **–ö—Ä–∞—Å–∏–≤—ã–µ –∑–∞–≥–ª—É—à–∫–∏** —Å —Ü–≤–µ—Ç–Ω—ã–º–∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- ‚úÖ **Loading —Å–æ—Å—Ç–æ—è–Ω–∏—è** —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —á–∞—Ç–æ–≤

### üì± **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**

#### **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç WhatsAppAvatar**
```tsx
<WhatsAppAvatar
    src={chat.avatarUrl}
    name={contactName}
    contactId={chat.phoneNumber}
    size="medium" // small | medium | large
    showStatus={false}
    isOnline={false}
    className="custom-class"
/>
```

#### **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ**
- **–°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤** - –∞–≤–∞—Ç–∞—Ä–∫–∏ 48x48px —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º–∏ –∑–∞–≥–ª—É—à–∫–∞–º–∏
- **–ó–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞** - –∞–≤–∞—Ç–∞—Ä–∫–∏ 48x48px —Å –∏–º–µ–Ω–µ–º –∫–æ–Ω—Ç–∞–∫—Ç–∞
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö** - –ø–æ–≤–µ—Ä—Ö –∞–≤–∞—Ç–∞—Ä–∫–∏ –≤ —Å–ø–∏—Å–∫–µ —á–∞—Ç–æ–≤

## üõ† **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

### **–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (React + TypeScript)**

#### **1. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö**
```tsx
// src/types/WhatsAppTypes.ts
export interface Chat {
    phoneNumber: string;
    name: string;
    avatarUrl?: string; // URL –∞–≤–∞—Ç–∞—Ä–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞
    lastMessage?: WhatsAppMessage;
    messages: WhatsAppMessage[];
    unreadCount: number;
}

export interface AvatarResponse {
    success: boolean;
    avatarUrl?: string;
    contactId?: string;
    error?: string;
}
```

#### **2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç WhatsAppAvatar**
```tsx
// src/components/WhatsAppAvatar.tsx
interface WhatsAppAvatarProps {
    src?: string | null;
    alt?: string;
    name?: string;
    size?: 'small' | 'medium' | 'large';
    showStatus?: boolean;
    isOnline?: boolean;
    className?: string;
    contactId?: string;
}
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback** –Ω–∞ –∑–∞–≥–ª—É—à–∫—É –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏
- **–¶–≤–µ—Ç–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ hash contactId
- **Loading –∞–Ω–∏–º–∞—Ü–∏—è** –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **Responsive —Ä–∞–∑–º–µ—Ä—ã** (36px, 48px, 64px)

#### **3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**

**ChatList.tsx:**
```tsx
<WhatsAppAvatar
    src={chat.avatarUrl}
    name={formatContactName(chat)}
    contactId={chat.phoneNumber}
    size="medium"
    className="transition-all duration-200"
/>
```

**ChatWindow.tsx:**
```tsx
<WhatsAppAvatar
    src={chat?.avatarUrl}
    name={chat?.name}
    contactId={chat?.phoneNumber}
    size="medium"
    className="mr-3"
/>
```

### **–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (Node.js + Express)**

#### **1. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö**
```typescript
// whatsapp-server/src/types/chat.ts
export interface Chat {
    id: string;
    phoneNumber: string;
    name?: string;
    avatarUrl?: string; // URL –∞–≤–∞—Ç–∞—Ä–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞
    messages: ChatMessage[];
    lastMessage?: ChatMessage;
    unreadCount?: number;
    timestamp: string;
}

export interface AvatarCache {
    [contactId: string]: {
        url: string | null;
        fetchedAt: number;
        expiresAt: number;
    };
}
```

#### **2. –ú–æ–¥—É–ª—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–æ–∫**
```typescript
// whatsapp-server/src/utils/avatarCache.ts

// –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∞–≤–∞—Ç–∞—Ä–∫–∏
export const getContactAvatar = async (client: Client, contactId: string): Promise<string | null>

// –ë–∞—Ç—á–µ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–∫
export const getMultipleContactAvatars = async (
    client: Client, 
    contactIds: string[]
): Promise<{ [contactId: string]: string | null }>

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º
export const clearAvatarCache = (): void
export const getAvatarCacheStats = ()
```

#### **3. API Endpoints**

| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| `GET` | `/avatar/:contactId` | –ü–æ–ª—É—á–∏—Ç—å –∞–≤–∞—Ç–∞—Ä–∫—É –∫–æ–Ω—Ç–∞–∫—Ç–∞ |
| `POST` | `/avatars/batch` | –ü–æ–ª—É—á–∏—Ç—å –∞–≤–∞—Ç–∞—Ä–∫–∏ –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ |
| `POST` | `/avatars/refresh` | –û–±–Ω–æ–≤–∏—Ç—å –∞–≤–∞—Ç–∞—Ä–∫–∏ –¥–ª—è –≤—Å–µ—Ö —á–∞—Ç–æ–≤ |
| `DELETE` | `/avatars/cache` | –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –∞–≤–∞—Ç–∞—Ä–æ–∫ |
| `GET` | `/avatars/cache/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞ |

## üóÑÔ∏è **–°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è**

### **–ö—ç—à –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (in-memory)**
```typescript
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—ç—à–∞
{
  "79001234567@c.us": {
    "url": "https://profile-pic-url.jpg",
    "fetchedAt": 1642234567890,
    "expiresAt": 1642320967890  // +24 —á–∞—Å–∞
  }
}
```

### **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è**
- **TTL 24 —á–∞—Å–∞** - –∞–≤–∞—Ç–∞—Ä–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- **Batch –∑–∞–≥—Ä—É–∑–∫–∞** - –¥–æ 5 –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- **Graceful degradation** - –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∞

## üé® **CSS —Å—Ç–∏–ª–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏**

### **–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏**
```css
/* src/index.css */
.whatsapp-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  object-fit: cover;
  background-color: #ddd;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-weight: 500;
  font-size: 18px;
  flex-shrink: 0;
}

/* –†–∞–∑–º–µ—Ä—ã */
.whatsapp-avatar-small { width: 36px; height: 36px; font-size: 16px; }
.whatsapp-avatar-large { width: 64px; height: 64px; font-size: 24px; }

/* Loading –∞–Ω–∏–º–∞—Ü–∏—è */
.whatsapp-avatar-loading {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: avatar-loading 1.5s infinite;
}

@keyframes avatar-loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}
```

### **–¶–≤–µ—Ç–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏**
```css
/* 6 —Ä–∞–∑–Ω—ã—Ö –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –∑–∞–≥–ª—É—à–µ–∫ */
.whatsapp-avatar-placeholder.color-1 {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}
.whatsapp-avatar-placeholder.color-2 {
  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
}
/* ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–æ color-5 */
```

## üöÄ **–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤–∞—Ç–∞—Ä–æ–∫**

### **1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**
```mermaid
sequenceDiagram
    participant C as Client
    participant S as Server
    participant W as WhatsApp
    
    C->>S: –ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Ç–æ–≤
    S->>C: –ß–∞—Ç—ã (—Å avatarUrl –µ—Å–ª–∏ –µ—Å—Ç—å)
    C->>S: POST /avatars/batch (–¥–ª—è —á–∞—Ç–æ–≤ –±–µ–∑ –∞–≤–∞—Ç–∞—Ä–æ–∫)
    S->>W: client.getProfilePicUrl() –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
    W->>S: URLs –∞–≤–∞—Ç–∞—Ä–æ–∫
    S->>C: –ú–∞—Å—Å–∏–≤ –∞–≤–∞—Ç–∞—Ä–æ–∫
    C->>C: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
```

### **2. –ù–æ–≤—ã–π —á–∞—Ç**
```typescript
// –ö–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
const newChat = {
    phoneNumber,
    name: extractedName,
    avatarUrl: undefined, // –ë—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞
    messages: [message],
    unreadCount: 1
};

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –∞–≤–∞—Ç–∞—Ä–∫—É
setTimeout(() => {
    loadAvatarsForChats({ [phoneNumber]: newChat });
}, 100);
```

### **3. –ë–∞—Ç—á–µ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**
```typescript
// –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ 5 –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
const batchSize = 5;
for (let i = 0; i < contactIds.length; i += batchSize) {
    const batch = contactIds.slice(i, i + batchSize);
    
    const batchPromises = batch.map(async (contactId) => {
        const avatar = await getContactAvatar(client, contactId);
        return { contactId, avatar };
    });
    
    const batchResults = await Promise.all(batchPromises);
    
    // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏
    if (i + batchSize < contactIds.length) {
        await new Promise(resolve => setTimeout(resolve, 100));
    }
}
```

## üé≠ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç WhatsApp –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–∞—Ç—ã —Å —Å–µ—Ä–≤–µ—Ä–∞
3. ‚úÖ **–û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∏** —Å –∫—Ä–∞—Å–∏–≤—ã–º–∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏
4. –í —Ñ–æ–Ω–µ **–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤–∞—Ç–∞—Ä–∫–∏** –∏–∑ WhatsApp
5. ‚úÖ **–ü–ª–∞–≤–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è** —Ä–µ–∞–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**
1. –ü—Ä–∏—Ö–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞
2. ‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∞
3. –í —Ñ–æ–Ω–µ **–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤–∞—Ç–∞—Ä–∫–∞**
4. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏

### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏**
1. –ê–≤–∞—Ç–∞—Ä–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ (–æ—à–∏–±–∫–∞ —Å–µ—Ç–∏)
2. ‚úÖ **Graceful fallback** –Ω–∞ –∑–∞–≥–ª—É—à–∫—É
3. –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

## üîß **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

### **–ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∫–∏ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞**
```http
GET /avatar/79001234567
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "contactId": "79001234567",
  "avatarUrl": "https://profile-pic-url.jpg",
  "message": "–ê–≤–∞—Ç–∞—Ä–∫–∞ –Ω–∞–π–¥–µ–Ω–∞"
}
```

### **–ë–∞—Ç—á–µ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–∫**
```http
POST /avatars/batch
Content-Type: application/json

{
  "contactIds": ["79001234567@c.us", "79007654321@c.us"]
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "avatars": {
    "79001234567@c.us": "https://profile-pic1.jpg",
    "79007654321@c.us": null
  },
  "message": "–ü–æ–ª—É—á–µ–Ω–æ –∞–≤–∞—Ç–∞—Ä–æ–∫: 2"
}
```

### **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–≤–∞—Ç–∞—Ä–æ–∫**
```http
POST /avatars/refresh
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–û–±–Ω–æ–≤–ª–µ–Ω–æ –∞–≤–∞—Ç–∞—Ä–æ–∫: 15 –∏–∑ 20",
  "totalChats": 20,
  "updatedChats": 15
}
```

## üé® **–î–∏–∑–∞–π–Ω –∏ UX**

### **–¶–≤–µ—Ç–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥–ª—É—à–µ–∫**
- **6 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤** –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
- **Hash-based —Ü–≤–µ—Ç** - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–æ–Ω—Ç–∞–∫—Ç –≤—Å–µ–≥–¥–∞ –æ–¥–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
- **–í—ã—Å–æ–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç** –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∏–Ω–∏—Ü–∏–∞–ª–æ–≤

### **–ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã**
- **Loading shimmer** –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
- **Smooth transitions** –ø—Ä–∏ —Å–º–µ–Ω–µ –∞–≤–∞—Ç–∞—Ä–æ–∫
- **Hover —ç—Ñ—Ñ–µ–∫—Ç—ã** –≤ —Å–ø–∏—Å–∫–µ —á–∞—Ç–æ–≤

### **Responsive –¥–∏–∑–∞–π–Ω**
- **3 —Ä–∞–∑–º–µ—Ä–∞**: small (36px), medium (48px), large (64px)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è** –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞
- **Touch-friendly** –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## üß™ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**

### **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**
- **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** - –∞–≤–∞—Ç–∞—Ä–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–ë–∞—Ç—á–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - –¥–æ 5 –∞–≤–∞—Ç–∞—Ä–æ–∫ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ 24 —á–∞—Å–∞** - –º–∏–Ω–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ WhatsApp API
- **–ú–µ–º–æ–∏–∑–∞—Ü–∏—è** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –∞–≤–∞—Ç–∞—Ä–∫–∞–º–∏

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
```http
GET /avatars/cache/stats
```

```json
{
  "success": true,
  "stats": {
    "totalEntries": 150,
    "validEntries": 142,
    "expiredEntries": 8,
    "memoryUsage": 24576
  }
}
```

## üõ°Ô∏è **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- **Graceful degradation** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã** —Å exponential backoff
- **Fallback –Ω–∞ –∑–∞–≥–ª—É—à–∫–∏** –ø—Ä–∏ –ª—é–±—ã—Ö –æ—à–∏–±–∫–∞—Ö
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- **–í–∞–ª–∏–¥–∞—Ü–∏—è URL** –∞–≤–∞—Ç–∞—Ä–æ–∫
- **–°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è** –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Rate limiting** –¥–ª—è –∑–∞—â–∏—Ç—ã WhatsApp API
- **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üîÆ **–ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è**

### **–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**
- [ ] **–õ–æ–∫–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ IndexedDB
- [ ] **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** (WebP, compression)
- [ ] **–°—Ç–∞—Ç—É—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** (–æ–Ω–ª–∞–π–Ω/–æ—Ñ–ª–∞–π–Ω)
- [ ] **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∞–≤–∞—Ç–∞—Ä–∫–∏** –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤
- [ ] **–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞** –∞–≤–∞—Ç–∞—Ä–æ–∫ —Å–æ—Å–µ–¥–Ω–∏—Ö —á–∞—Ç–æ–≤

### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è**
- [ ] **Service Worker** –¥–ª—è –æ—Ñ–ª–∞–π–Ω –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] **Intersection Observer** –¥–ª—è –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] **WebWorkers** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] **CDN –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏

## üí° **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

–°–∏—Å—Ç–µ–º–∞ –∞–≤–∞—Ç–∞—Ä–æ–∫ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç, –¥–µ–ª–∞—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å WhatsApp –±–æ–ª–µ–µ –≤–∏–∑—É–∞–ª—å–Ω–æ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–º –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ best practices:

**–ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
- üé≠ **–†–µ–∞–ª—å–Ω—ã–µ –∞–≤–∞—Ç–∞—Ä–∫–∏** –∏–∑ WhatsApp
- üöÄ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- üé® **–ö—Ä–∞—Å–∏–≤—ã–µ –∑–∞–≥–ª—É—à–∫–∏** –∏ –∞–Ω–∏–º–∞—Ü–∏–∏
- üì± **Responsive –¥–∏–∑–∞–π–Ω** –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- üõ°Ô∏è **–ù–∞–¥–µ–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞** —Å graceful degradation
- üîß **–ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –∏ maintenance 