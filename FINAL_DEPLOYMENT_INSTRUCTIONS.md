# –§–ò–ù–ê–õ–¨–ù–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø: –î–µ–ø–ª–æ–π whatsapp-server —Å –ø–æ—Ä—Ç–æ–º 3002

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

1. ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `api-2wix-whatsapp-PORT3002.conf` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥–æ–º
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `docker-compose.synology.yml` –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Ä—Ç–∞ 3002
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: VPS ‚Üí VPN ‚Üí Synology:3002 ‚Üí Container:3000

---

## üìã –ü–û–®–ê–ì–û–í–´–ï –ö–û–ú–ê–ù–î–´

### –®–ê–ì 1: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞ VPS

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ VPS (shortsai-vps):**

```bash
# 1.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω—è—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤
ss -lntp | grep -E ':(3000|3001|3002|3003)'

# 1.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤ (–ù–ï –¢–†–û–ì–ê–¢–¨!)
sudo ls -la /etc/nginx/sites-enabled/
sudo grep -r 'server_name' /etc/nginx/sites-enabled/ | grep -v '#'

# 1.3 –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ VPN IP Synology
ip route | grep '10.8.0'
# –û–±—ã—á–Ω–æ Synology –∏–º–µ–µ—Ç IP 10.8.0.1 (OpenVPN server)
# –ï—Å–ª–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è - –∑–∞–ø–æ–º–Ω–∏—Ç–µ –µ–≥–æ –¥–ª—è –∑–∞–º–µ–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥–µ!

# 1.4 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞ api.2wix.ru
sudo cat /etc/nginx/sites-available/api-2wix-whatsapp.conf
ls -la /etc/nginx/sites-enabled/ | grep api-2wix
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ—Ä—Ç—ã 3000 –∏ 3001 –∑–∞–Ω—è—Ç—ã (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã)
- –ü–æ—Ä—Ç 3002 —Å–≤–æ–±–æ–¥–µ–Ω
- VPN –º–∞—Ä—à—Ä—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 10.8.0.0/24
- –ö–æ–Ω—Ñ–∏–≥ api-2wix-whatsapp.conf —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º)

---

### –®–ê–ì 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ docker-compose –Ω–∞ Synology

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ Synology (—á–µ—Ä–µ–∑ SSH):**

```bash
# 2.1 –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /volume1/docker/whatsapp-server

# 2.2 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–∏–π docker-compose.synology.yml
cat docker-compose.synology.yml | grep -A 2 'expose\|ports'

# 2.3 –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
sudo docker-compose -f docker-compose.synology.yml down

# 2.4 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª –æ–±–Ω–æ–≤–ª–µ–Ω (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ports: "3002:3000")
cat docker-compose.synology.yml | grep -A 1 'ports:'

# 2.5 –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –Ω–æ–≤—ã–º –ø–æ—Ä—Ç–æ–º
sudo docker-compose -f docker-compose.synology.yml up -d --build

# 2.6 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ—Ä—Ç 3002 —Å–ª—É—à–∞–µ—Ç
sudo ss -lntp | grep 3002
# –û–∂–∏–¥–∞–µ—Ç—Å—è: LISTEN –Ω–∞ 0.0.0.0:3002

# 2.7 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
sudo docker logs whatsapp-server --tail 50
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
- –ü–æ—Ä—Ç 3002 —Å–ª—É—à–∞–µ—Ç –Ω–∞ —Ö–æ—Å—Ç–µ Synology
- –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 3000 –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

---

### –®–ê–ì 3: –°–æ–∑–¥–∞–Ω–∏–µ Nginx –∫–æ–Ω—Ñ–∏–≥–∞ –Ω–∞ VPS

**–í–ê–ñ–ù–û:** –ó–∞–º–µ–Ω–∏—Ç–µ `10.8.0.1` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π VPN IP Synology –µ—Å–ª–∏ –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è!

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ VPS:**

```bash
# 3.1 –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ (—Å Windows —á–µ—Ä–µ–∑ scp –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é)
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ scp —Å Windows:
# scp api-2wix-whatsapp-PORT3002.conf shortsai-vps:/tmp/

# 3.2 –ù–∞ VPS: —Å–æ–∑–¥–∞–π—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥
sudo nano /etc/nginx/sites-available/api-2wix-whatsapp.conf

# 3.3 –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ —Ñ–∞–π–ª–∞ api-2wix-whatsapp-PORT3002.conf
# –í–ê–ñ–ù–û: –ï—Å–ª–∏ VPN IP Synology –Ω–µ 10.8.0.1, –∑–∞–º–µ–Ω–∏—Ç–µ –≤—Å–µ –≤—Ö–æ–∂–¥–µ–Ω–∏—è!

# 3.4 –°–æ–∑–¥–∞–π—Ç–µ symlink (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
sudo ln -sf /etc/nginx/sites-available/api-2wix-whatsapp.conf /etc/nginx/sites-enabled/api-2wix-whatsapp.conf

# 3.5 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
sudo nginx -t
# –û–∂–∏–¥–∞–µ—Ç—Å—è: "syntax is ok" –∏ "test is successful"

# 3.6 –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ nginx (–ù–ï restart!)
sudo systemctl reload nginx
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–æ–Ω—Ñ–∏–≥ —Å–æ–∑–¥–∞–Ω –∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
- Nginx –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω –±–µ–∑ –æ—à–∏–±–æ–∫
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

---

### –®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä–∫–∏

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ VPS:**

```bash
# 4.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ ACME challenge (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 200, –ù–ï 301!)
echo 'test-acme-check' | sudo tee /var/www/html/.well-known/acme-challenge/test
curl -I http://api.2wix.ru/.well-known/acme-challenge/test
# –û–∂–∏–¥–∞–µ—Ç—Å—è: HTTP/1.1 200 OK
# –ï—Å–ª–∏ 301 - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ location ^~ /.well-known/ –∏–¥–µ—Ç –ü–ï–†–ï–î location /

# 4.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Synology —á–µ—Ä–µ–∑ VPN
curl -I http://10.8.0.1:3002/health
# –ó–∞–º–µ–Ω–∏—Ç–µ 10.8.0.1 –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π VPN IP Synology!
# –û–∂–∏–¥–∞–µ—Ç—Å—è: HTTP/1.1 200 OK

# 4.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –¥–æ–º–µ–Ω (HTTP, –¥–æ certbot)
curl -I http://api.2wix.ru/health
# –ú–æ–∂–µ—Ç –±—ã—Ç—å 301 —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–æ certbot

# 4.4 –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã
curl -I http://localhost:3000  # –°—Ç–∞—Ä—ã–π –ø—Ä–æ–µ–∫—Ç 1
curl -I http://localhost:3001  # –°—Ç–∞—Ä—ã–π –ø—Ä–æ–µ–∫—Ç 2
# –û–±–∞ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ACME challenge –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200
- Synology –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ VPN –Ω–∞ –ø–æ—Ä—Ç—É 3002
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç

---

### –®–ê–ì 5: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ ACME)

**–í–ê–ñ–ù–û:** –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ ACME challenge —Ä–∞–±–æ—Ç–∞–µ—Ç (200 OK)!

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ VPS:**

```bash
# 5.1 –û–±–Ω–æ–≤–∏—Ç–µ DNS –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
# api.2wix.ru –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ 159.255.37.158
# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π IP 35.194.39.8 –µ—Å–ª–∏ –µ—Å—Ç—å

# 5.2 –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DNS

# 5.3 –ó–∞–ø—É—Å—Ç–∏—Ç–µ certbot
sudo certbot --nginx -d api.2wix.ru

# Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# - –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ—Ç SSL –¥–∏—Ä–µ–∫—Ç–∏–≤—ã
# - –î–æ–±–∞–≤–∏—Ç ssl –≤ listen
# - –ù–∞—Å—Ç—Ä–æ–∏—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
# - –û–±–Ω–æ–≤–∏—Ç –∫–æ–Ω—Ñ–∏–≥

# 5.4 –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTPS
curl -I https://api.2wix.ru/health
curl -I https://api.2wix.ru/whatsapp/status
# –û–∂–∏–¥–∞–µ—Ç—Å—è: HTTP/2 200
```

---

### –®–ê–ì 6: –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ VPS:**

```bash
# 6.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö endpoints
curl -I https://api.2wix.ru/health
curl -I https://api.2wix.ru/whatsapp/status
curl -I https://api.2wix.ru/whatsapp/

# 6.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ WebSocket (—Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ wscat)
# npm install -g wscat
# wscat -c wss://api.2wix.ru/socket.io/?EIO=4&transport=websocket
# –î–æ–ª–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

# 6.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ nginx
sudo tail -f /var/log/nginx/api-2wix-access.log
sudo tail -f /var/log/nginx/api-2wix-error.log

# 6.4 –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ —á–µ—Ä–µ–∑ curl —Å—Ç–∞—Ä—ã–µ –¥–æ–º–µ–Ω—ã
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã

```bash
# –ù–∞ VPS –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
sudo ls -la /etc/nginx/sites-enabled/
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
# - api-2wix-whatsapp.conf (–Ω–æ–≤—ã–π)
# - api.playflon.com (—Å—Ç–∞—Ä—ã–π –ø—Ä–æ–µ–∫—Ç 1)
# - api.shortsai.ru (—Å—Ç–∞—Ä—ã–π –ø—Ä–æ–µ–∫—Ç 2)

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å—Ç–∞—Ä—ã–µ –ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
ss -lntp | grep -E ':(3000|3001)'
# –û–±–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–Ω—è—Ç—ã —Å—Ç–∞—Ä—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–æ–≤—ã–π –ø–æ—Ä—Ç 3002 –ù–ï –Ω–∞ VPS
ss -lntp | grep ':3002'
# –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∏—á–µ–≥–æ (–ø–æ—Ä—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ Synology)
```

---

## üìù –ò—Ç–æ–≥–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥ Nginx

–§–∞–π–ª: `api-2wix-whatsapp-PORT3002.conf`

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- ‚úÖ ACME challenge –∏–¥–µ—Ç –ü–ï–†–ï–î —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç `^~`)
- ‚úÖ –í—Å–µ –ø—Ä–æ–∫—Å–∏ –∏–¥—É—Ç –Ω–∞ `10.8.0.1:3002` (VPN IP Synology)
- ‚úÖ WebSocket headers –¥–ª—è `/socket.io/`
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã (300s)
- ‚úÖ SSL –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã (certbot –∏—Ö —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ—Ç)

---

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **VPN IP Synology:** –û–±—ã—á–Ω–æ `10.8.0.1`, –Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–∞–Ω–¥–æ–π `ip route | grep '10.8.0'`
2. **–ü–æ—Ä—Ç 3002:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ Synology, –ù–ï –Ω–∞ VPS
3. **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã:** –ù–ï –¢–†–û–ì–ê–¢–¨ –∏—Ö –∫–æ–Ω—Ñ–∏–≥–∏ –∏ –ø–æ—Ä—Ç—ã
4. **ACME challenge:** –î–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 200, –Ω–µ 301
5. **Certbot:** –ó–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ ACME

---

## üìû –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

1. **ACME –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 301:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `location ^~ /.well-known/` –∏–¥–µ—Ç –ü–ï–†–ï–î `location /`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `ls -la /var/www/html/.well-known/acme-challenge/`

2. **–ù–µ –º–æ–≥—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Synology:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ VPN IP: `ip route | grep '10.8.0'`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ—Ä—Ç 3002 —Å–ª—É—à–∞–µ—Ç –Ω–∞ Synology: `ss -lntp | grep 3002`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–∞ Synology

3. **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏—Ö –∫–æ–Ω—Ñ–∏–≥–∏ –Ω–∞ –º–µ—Å—Ç–µ: `ls -la /etc/nginx/sites-enabled/`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `sudo journalctl -u nginx -n 50`
   - –û—Ç–∫–∞—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è: `sudo systemctl reload nginx`

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [ ] –ü–æ—Ä—Ç—ã 3000/3001 –∑–∞–Ω—è—Ç—ã —Å—Ç–∞—Ä—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- [ ] –ü–æ—Ä—Ç 3002 —Å–≤–æ–±–æ–¥–µ–Ω –Ω–∞ VPS
- [ ] VPN IP Synology –æ–ø—Ä–µ–¥–µ–ª–µ–Ω (–æ–±—ã—á–Ω–æ 10.8.0.1)
- [ ] docker-compose.synology.yml –æ–±–Ω–æ–≤–ª–µ–Ω (ports: "3002:3000")
- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ Synology –∏ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 3002
- [ ] Nginx –∫–æ–Ω—Ñ–∏–≥ —Å–æ–∑–¥–∞–Ω –Ω–∞ VPS —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º VPN IP
- [ ] ACME challenge –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200
- [ ] Synology –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ VPN –Ω–∞ –ø–æ—Ä—Ç—É 3002
- [ ] –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- [ ] Certbot –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] HTTPS endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
