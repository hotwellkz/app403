# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ React Error #306

## üîç –ü—Ä–æ–±–ª–µ–º–∞

**–û—à–∏–±–∫–∞**: `Minified React error #306` –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∏–∫–æ–Ω–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/transactions/history/<id>`

**–õ–æ–≥**: "DroppableCategory –ø–æ–ª—É—á–∏–ª onDelete: true –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: –û–±—â –†–∞—Å—Ö" ‚Üí –∑–∞—Ç–µ–º –ø–∞–¥–µ–Ω–∏–µ UI

**–ö–æ–Ω—Ç–µ–∫—Å—Ç**: –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å lazy loading –∏ code splitting

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. ErrorBoundary –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω `src/components/ErrorBoundary.tsx`
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `src/App.tsx`
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è React Error #306

### 2. Sourcemap –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ `vite.config.ts`: `sourcemap: true` (–≤—Ä–µ–º–µ–Ω–Ω–æ)
- ‚úÖ –¢–µ–ø–µ—Ä—å –≤ build –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã source maps –¥–ª—è —Ç–æ—á–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 3. –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä renderAttachments
**–ü—Ä–æ–±–ª–µ–º–∞**: `renderAttachments && renderAttachments()` –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å `false`, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç React Error #306

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤:**
- ‚úÖ `src/components/transactions/OptimizedTransactionCard.tsx`
- ‚úÖ `src/components/transactions/TransactionCard.tsx`
- ‚úÖ `src/pages/TransactionHistoryPage.tsx`
- ‚úÖ `src/components/transactions/VirtualizedTransactionList.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω renderAttachments

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ**: `renderAttachments && renderAttachments()` ‚Üí `renderAttachments ? renderAttachments() : null`

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ ContextMenu
**–ü—Ä–æ–±–ª–µ–º–∞**: Handlers –º–æ–≥—É—Ç –±—ã—Ç—å `undefined`, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤:**
- ‚úÖ `src/components/ContextMenu.tsx`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `undefined` –¥–ª—è –≤—Å–µ—Ö handlers
- ‚úÖ –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –∫–Ω–æ–ø–æ–∫ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ handlers –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- ‚úÖ Try-catch –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ –¥–µ–π—Å—Ç–≤–∏—è—Ö

### 5. –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –∏–∫–æ–Ω–æ–∫ (—É–∂–µ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–µ–µ)
- ‚úÖ `src/components/transactions/CategoryCard.tsx`
- ‚úÖ `src/components/CategoryCard.tsx`
- ‚úÖ `src/hooks/useCategories.ts`

## üìã –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`src/components/ErrorBoundary.tsx`** (–Ω–æ–≤—ã–π)
   - –ö–ª–∞—Å—Å–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –æ—à–∏–±–æ–∫
   - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è React Error #306

2. **`src/App.tsx`**
   - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `ErrorBoundary`
   - –û–±–µ—Ä–Ω—É—Ç `<Suspense>` –≤ `<ErrorBoundary>`

3. **`vite.config.ts`**
   - –ò–∑–º–µ–Ω–µ–Ω–æ: `sourcemap: true` (–≤—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)

4. **`src/components/transactions/OptimizedTransactionCard.tsx`**
   - –ò–∑–º–µ–Ω–µ–Ω–æ: `renderAttachments && renderAttachments()` ‚Üí `renderAttachments ? renderAttachments() : null`

5. **`src/components/transactions/TransactionCard.tsx`**
   - –ò–∑–º–µ–Ω–µ–Ω–æ: `renderAttachments && renderAttachments()` ‚Üí `renderAttachments ? renderAttachments() : null`

6. **`src/pages/TransactionHistoryPage.tsx`**
   - –ò–∑–º–µ–Ω–µ–Ω–æ: `renderAttachments={() => condition && <JSX>}` ‚Üí `renderAttachments={() => { if (condition) return <JSX>; return null; }}`

7. **`src/components/transactions/VirtualizedTransactionList.tsx`**
   - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `FileText` –∏–∑ `lucide-react`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `renderAttachments` –≤ `TransactionItem`
   - –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `OptimizedTransactionCard`

8. **`src/components/ContextMenu.tsx`**
   - –ò–∑–º–µ–Ω–µ–Ω —Ç–∏–ø `action` –Ω–∞ `(() => void) | undefined`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `undefined`
   - –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –∫–Ω–æ–ø–æ–∫
   - Try-catch –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

## üéØ –¢–æ—á–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ (–≥–∏–ø–æ—Ç–µ–∑–∞)

**–ù–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞**: `renderAttachments` –≤–æ–∑–≤—Ä–∞—â–∞–ª `false` –≤–º–µ—Å—Ç–æ `null` –∏–ª–∏ –≤–∞–ª–∏–¥–Ω–æ–≥–æ React —ç–ª–µ–º–µ–Ω—Ç–∞.

**–ü–æ—á–µ–º—É "—Ñ–∏–∫—Å –∏–∫–æ–Ω–æ–∫" –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª**:
- –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –Ω–µ –≤ –∏–∫–æ–Ω–∫–∞—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ `renderAttachments`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–ª `false`
- React Error #306 –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å `false`, `undefined`, –∏–ª–∏ –æ–±—ä–µ–∫—Ç –∫–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

**–ü–æ—á–µ–º—É –ø—Ä–æ—è–≤–ª—è–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫–ª–∏–∫–µ**:
- –ü—Ä–∏ –∫–ª–∏–∫–µ –º–æ–≥–ª–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `renderAttachments` –≤—ã–∑—ã–≤–∞–ª—Å—è —Å –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ï—Å–ª–∏ `transaction.waybillData?.files?.length === 0`, —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ `false`
- React –ø—ã—Ç–∞–ª—Å—è —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å `false`, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –æ—à–∏–±–∫—É #306

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ `renderAttachments` –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null` –∏–ª–∏ –≤–∞–ª–∏–¥–Ω—ã–π React —ç–ª–µ–º–µ–Ω—Ç
- ‚úÖ –í—Å–µ handlers –≤ `ContextMenu` –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ `undefined`
- ‚úÖ ErrorBoundary –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- ‚úÖ Sourcemap –≤–∫–ª—é—á–µ–Ω –¥–ª—è —Ç–æ—á–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

1. **–°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç**: `npm run build`
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å preview**: `npm run preview`
3. **–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏**: –û—Ç–∫—Ä—ã—Ç—å `/transactions/history/<id>`, –∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –∏–∫–æ–Ω–∫—É
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å**: –û—à–∏–±–∫–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–Ω–∏–∫–∞—Ç—å, –∏–ª–∏ ErrorBoundary –ø–æ–∫–∞–∂–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

## ‚ö†Ô∏è –ü–æ—Å–ª–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ø—Ä–æ–±–ª–µ–º–∞ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞:
- –í–µ—Ä–Ω—É—Ç—å `sourcemap: process.env.NODE_ENV === 'development'` –≤ `vite.config.ts`
- Sourcemaps –≤ production —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞

## üìù –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞:
- Lazy loading –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–∞–±–æ—Ç–∞–µ—Ç
- `OptimizedTransactionHistoryPage` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é
- `VirtualizedTransactionList` –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Ω–µ –≥—Ä—É–∑–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π lazy import)
